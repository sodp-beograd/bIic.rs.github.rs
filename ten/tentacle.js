(()=>{window.tentacles=window.tentacles||{};var I=window.console,v=function(){},d=function(){},Y=["h1","h2","h3","h4","h5","h6","p","span","strong","cite"],H=["img","source"],g="landing",o="article",t=(window.tentaclesProcessedABTitles=!1,window.tentacles.initiated=!1,!!window.tentacles.flickerHandling&&window.tentacles.flickerHandling),y=window.tentacles.apiToken;function V(){t&&document.body.classList.remove("tentacles-flicker-handling")}y||""===y||I.error('TENTACLES: No API key given. Please add a valid apiToken above this script call: window.tentacles = { apiToken: "09876543edfghy7"};'),window.tentacles.version="2.4.7.0";var f,n,r,a,i,l="1"===localStorage.getItem("tentacles-version")?(I.log("TENTACLES: Version 1 detected and loaded"),window.tentacles.installUri?window.tentacles.installUri+"/tentacles.js?":"https://tentacles.smartocto.com/ten/tentacles.js?v=1741167381534"):window.tentacles.installUri?window.tentacles.installUri+"/tentacles-20.js?":"https://tentacles.smartocto.com/ten/tentacles-20.js?v=1741167381534",s=null,c=null,W=null,G=null,z=null,Z=null,K=null,Q={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,a,o,r,i,l="",s=0;for(e=Q._utf8_encode(e);s<e.length;)a=(t=e.charCodeAt(s++))>>2,o=(3&t)<<4|(t=e.charCodeAt(s++))>>4,r=(15&t)<<2|(n=e.charCodeAt(s++))>>6,i=63&n,isNaN(t)?r=i=64:isNaN(n)&&(i=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(i);return l},decode:function(e){var t,n,a,o,r,i="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(o=this._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(o=this._keyStr.indexOf(e.charAt(l++)))>>2,a=(3&o)<<6|(r=this._keyStr.indexOf(e.charAt(l++))),i+=String.fromCharCode(t),64!==o&&(i+=String.fromCharCode(n)),64!==r&&(i+=String.fromCharCode(a));return Q._utf8_decode(i)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):(127<a&&a<2048?t+=String.fromCharCode(a>>6|192):t=(t+=String.fromCharCode(a>>12|224))+String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){var t,n="",a=0;for(c1=c2=0;a<e.length;)(t=e.charCodeAt(a))<128?(n+=String.fromCharCode(t),a++):191<t&&t<224?(c2=e.charCodeAt(a+1),n+=String.fromCharCode((31&t)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),n+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),a+=3);return n}},ee=(f=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},i={compressToBase64:function(e){if(null==e)return"";var t=i._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""===t?null:i._decompress(t.length,32,function(e){return te(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":i._compress(e,15,function(e){return f(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""===t?null:i._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),a=0,o=t.length;a<o;a++){var r=t.charCodeAt(a);n[2*a]=r>>>8,n[2*a+1]=r%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var t=new Array(e.length/2),n=0,a=t.length;n<a;n++)t[n]=256*e[2*n]+e[2*n+1];var o=[];return t.forEach(function(e){o.push(f(e))}),i.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""===t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,function(e){return te(r,t.charAt(e))}))},compress:function(e){return i._compress(e,16,function(e){return f(e)})},_compress:function(e,t,n){if(null==e)return"";for(var a,o,r,i,l={},s={},c="",_=2,d=3,g=2,u=[],m=0,p=0,h=0;h<e.length;h+=1)if(r=e.charAt(h),Object.prototype.hasOwnProperty.call(l,r)||(l[r]=d++,s[r]=!0),i=c+r,Object.prototype.hasOwnProperty.call(l,i))c=i;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<g;a++)m<<=1,p===t-1?(p=0,u.push(n(m)),m=0):p++;for(o=c.charCodeAt(0),a=0;a<8;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1}else{for(o=1,a=0;a<g;a++)m=m<<1|o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o=0;for(o=c.charCodeAt(0),a=0;a<16;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1}0==--_&&(_=Math.pow(2,g),g++),delete s[c]}else for(o=l[c],a=0;a<g;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1;0==--_&&(_=Math.pow(2,g),g++),l[i]=d++,c=String(r)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<g;a++)m<<=1,p===t-1?(p=0,u.push(n(m)),m=0):p++;for(o=c.charCodeAt(0),a=0;a<8;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1}else{for(o=1,a=0;a<g;a++)m=m<<1|o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o=0;for(o=c.charCodeAt(0),a=0;a<16;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1}0==--_&&(_=Math.pow(2,g),g++),delete s[c]}else for(o=l[c],a=0;a<g;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1;0==--_&&(_=Math.pow(2,g),g++)}for(o=2,a=0;a<g;a++)m=m<<1|1&o,p===t-1?(p=0,u.push(n(m)),m=0):p++,o>>=1;for(;;){if(m<<=1,p===t-1){u.push(n(m));break}p++}return u.join("")},decompress:function(t){return null==t?"":""===t?null:i._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){for(var a,o,r,i,l,s,_=[],c=4,d=4,g=3,u="",m=[],p={val:n(0),position:t,index:1},h=0;h<3;h+=1)_[h]=h;for(o=0,i=Math.pow(2,2),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;switch(o){case 0:for(o=0,i=Math.pow(2,8),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;s=f(o);break;case 1:for(o=0,i=Math.pow(2,16),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;s=f(o);break;case 2:return""}for(a=_[3]=s,m.push(s);;){if(e<p.index)return"";for(o=0,i=Math.pow(2,g),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;switch(s=o){case 0:for(o=0,i=Math.pow(2,8),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;_[d++]=f(o),s=d-1,c--;break;case 1:for(o=0,i=Math.pow(2,16),l=1;l!==i;)r=p.val&p.position,p.position>>=1,0===p.position&&(p.position=t,p.val=n(p.index++)),o|=(0<r?1:0)*l,l<<=1;_[d++]=f(o),s=d-1,c--;break;case 2:return m.join("")}if(0===c&&(c=Math.pow(2,g),g++),_[s])u=_[s];else{if(s!==d)return null;u=a+a.charAt(0)}m.push(u),_[d++]=a+u.charAt(0),a=u,0==--c&&(c=Math.pow(2,g),g++)}}});function te(e,t){if(!a[e]){a[e]={};for(var n=0;n<e.length;n++)a[e][e.charAt(n)]=n}return a[e][t]}"function"==typeof define&&define.amd?define("LZString",function(){return ee}):"undefined"!=typeof module&&null!=module&&(module.exports=ee),Math.round10||(Math.round10=function(e,t){return n="round",e=e,void 0===(t=t)||0==+t?Math[n](e):(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[n](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))));var n});var ne=3e4,ae="active",oe="completed",u="t"===localStorage.getItem("tentaclesEnabled"),P=JSON.parse(localStorage.getItem("tentacles_"+y+"_urls"));localStorage.removeItem("tentacles_user_id"),localStorage.removeItem("tentacle_pagedata"),localStorage.removeItem("tentacles_pagedata"),localStorage.removeItem("tentacles_domainregex"),localStorage.removeItem("tentacles_useDivolte"),localStorage.removeItem("tentacles_reading_time"),localStorage.removeItem("tentacles_basePaths"),localStorage.removeItem("tentacles_urls"),localStorage.removeItem("tentacles_data_layer_config"),localStorage.removeItem("tentacles_page_urls"),localStorage.removeItem("tentacles_excludeclasses"),localStorage.removeItem("tentacles_domainsearchpath"),localStorage.removeItem("tentacles_urls_time"),localStorage.removeItem("tentacles_useIngestionApi"),localStorage.removeItem("tentacles_activefilter"),localStorage.removeItem("tentacles_dockcache_time"),localStorage.removeItem("tentacles_domainvpath"),localStorage.removeItem("tentacles_xPathIds"),localStorage.removeItem("tentacles_currentHostname"),localStorage.removeItem("tentacles_replacementElements"),localStorage.removeItem("tentacles_useDivInReplacement");var m,p,h,T,w,S,b,k,C,O,re,ie,e,le=!0,se=!0,x=[],ce=[],de="",A=!1,ge="",N="",E=[],L=!1,D=[],R=!1,J=null,M=!1,U=!1,j=null,B=!1,q=!1,F=null,ue=null,me=null,pe=null,he=null;function fe(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return e[a];return null}function _e(e){for(var t=(e=>{var t,n,a,o=0,r=[];if(""===e.trim())return[];if(/[^0-9a-fA-F]/.test(e))return!1;for(n=(t=e.match(/.{1,2}/g)).length,a=0;a<n;++a)""!==t[a].trim()&&(r[o++]=parseInt(t[a],16));return r})(e),n="",a=0;a<t.length;a+=2)n+=String.fromCharCode(t[a]|t[a+1]<<8);return n}function we(e){for(var t=[],n=0;n<e.length;n++){var a=e.charCodeAt(n);t.push(255&a),t.push(a>>8&255)}var o,r,i,l=t,s="";if(!(e=>"object"==typeof e&&e instanceof Array)(l))return!1;for(r=l.length,o=0;o<r;++o)l[o]<0&&(l[o]=l[o]+256),void 0===l[o]&&(alert("Boom "+o),l[o]=0),1===(i=l[o].toString(16)).length&&(i="0"+i),s+=i;return s.trim()}function Se(){return new Promise(function(t,e){try{window&&window.tentacles.hasOwnProperty("pageType")&&(window.tentacles.pageType.toLowerCase()===o?t(!0):t(!1));var n=localStorage.getItem("tentacles_"+y+"_basePaths");null!==n?-1===JSON.parse(n).indexOf(window.location.pathname)?t(!0):t(!1):X().then(function(e){t(!!e)})}catch(t){e(t)}})}function X(d){return new Promise(function(t,n){try{var e,_,a=localStorage.getItem("tentacles_"+y+"_domainregex"),o=null!==(o=localStorage.getItem("tentacles_"+y+"_domainregex_on_params"))&&"true"===o,r=localStorage.getItem("tentacles_"+y+"_domainvpath"),i=new RegExp(r,"g"),l=localStorage.getItem("tentacles_"+y+"_basePaths"),s=o?window.location.href:window.location.pathname,c=!1;d&&(s=d),r&&(c=i.test(s)),a?(e=new RegExp(a,"g").exec(s))&&2<=e.length?(e.splice(0,1),_=e.filter(function(e){if(e)return e}).map(function(e){return e.toString()})[0],l?De("feed"+_).then(function(e){e=e.substring(0,20);t(c?"v"+e:e)}):t(c?"v"+_:_)):t():l?De("feed"+s).then(function(e){e=e.substring(0,20);t(c?"v"+e:e)}):t()}catch(e){n(e)}})}function Ie(){return new Promise(function(e,t){window.ingestion&&void 0!==window.ingestion?e(!0):Ee({url:window.tentacles.installUri?window.tentacles.installUri+"/ingestion.js":"https://tentacles.smartocto.com/ten/ingestion.js?v=1741167381534",defer:!0,async:!0}).then(()=>{void 0===window.ingestion&&window.module&&window.module.exports&&(window.ingestion=window.module.exports),e(!0)}).catch(e=>{I.error("IngestionApi failed to load: ",e),t(!1)})})}function ve(i){return new Promise(function(n,t){var e,a,o,r;u?n(!0):(e=window&&window.tentacles&&window.tentacles.brandId?window.tentacles.brandId:void 0,a=window&&window.tentacles&&window.tentacles.relationId?window.tentacles.relationId:void 0,o=Je(),i&&"object"==typeof i&&(i.brandId&&(e=i.brandId),i.relationId&&(a=i.relationId),i.channel)&&(o=i.channel),r={},Ie().then(()=>{r.channel=o,r.brandId=e;let t=Te();t===g?a?(r.relationId=null,r.pageType=t,window.ingestion.signal("pageView",r),n(!0)):Pe().then(e=>{r.relationId=e,r.pageType=t,window.ingestion.signal("pageView",r),n(!0)}):(r.pageType=t,a&&(r.relationId=a),window.ingestion.signal("pageView",r),n(!0))}).catch(e=>{I.error("IngestionApi failed to load: ",e),t(!1)}))})}function ye(r,i,l){return new Promise(function(n,a){if(i=i||localStorage.getItem("tentacles_linkClick"),r&&i)try{var e=_e(i),e=ee.decompressFromUTF16(e),t=JSON.parse(e);function o(e,t){Ie().then(()=>{t&&!u?U&&(ingestion.signal(e,t),v("Link click event sent to ingestion API",e,t),n()):I.warn("Tentacles desktop is activated no data is sent.")}).catch(e=>{I.error("IngestionApi failed to load: ",e),a(e)})}t.relationId=r,localStorage.getItem("tentacles_linkClick")&&localStorage.removeItem("tentacles_linkClick"),be("linkclick")||window.tentacles.hasOwnProperty("trackauto")&&!window.tentacles.trackauto?(v("window.tentacles.manualEvents is set, window.tentacles.trackauto is set to false","current type",l,"content",t),l?(o(l,t),n()):a("Click event cannot be sent because type is not defined.")):(c=setTimeout(o,500,"linkClick",t),W=setTimeout(o,1e4,"loyaltyClick",t))}catch(e){d(e),localStorage.getItem("tentacles_linkClick")&&localStorage.removeItem("tentacles_linkClick"),a(e)}})}function Pe(){return new Promise(function(t,e){try{De("landing"+(a=document.querySelector("link[rel='canonical']"),o=document.querySelector("meta[property='og:url']"),null!==a?a.getAttribute("href"):null!==o?o.getAttribute("content"):n||document.URL)).then(function(e){e=e.substring(0,20);t(e)})}catch(t){e(t)}var n,a,o})}function Te(){return window&&window.tentacles.hasOwnProperty("pageType")&&"string"==typeof window.tentacles.pageType&&window.tentacles.pageType.toLowerCase()===g?g:o}function be(t){return window.tentacles.manualEvents&&0<window.tentacles.manualEvents.split(",").filter(function(e){return e.trim().toLowerCase()===t.trim().toLowerCase()}).length}function ke(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}function Ce(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLocaleLowerCase()).replace(/\+/g,"")).replace(/\*/g,"")).replace(/\-/g,"")).replace(/\=/g,"")).replace(/&&/g,"")).replace(/||/g,"")).replace(/>/g,"")).replace(/</g,"")).replace(/!/g,"")).replace(/\(/g,"")).replace(/\)/g,"")).replace(/{/g,"")).replace(/}/g,"")).replace(/\[/g,"")).replace(/]/g,"")).replace(/^/g,"")).replace(/"/g,"")).replace(/~/g,"")).replace(/\?/g,"")).replace(/:/g,"")).replace(/\\/g,"")).replace(/\//g,"")}function Oe(e){var t,n={};if(null===e||!Array.isArray(e))return null;for(t in e){var a,o=e[t];for(a in o)if(o[a]&&o[a].mapping){var r=o[a].mapping;if(r)for(var i=0;i<r.length;i++){var l=r[i],s=l.inputField,c="["!==s.substring(0,1)?".":"",c="["!==s.substring(0,1)?s:a+c+s,s=l.outputField;s in n&&n[s]||(n[s]=(e=>{try{var t=null,n=(a=(a=e).replace(/\[(\d+)]/g,".$1"),o=window[a.substring(0,a.indexOf("."))],a=a.substring(a.indexOf(".")+1),String(a).split(".").reduce(function(e,t){try{e=e[t]}catch(e){return null}return e},o));return t=n?"string"==typeof n||n instanceof String?n.split("!").join("&#33;"):n:t}catch(e){I.error(e)}var a,o})(c))}}}return n}function xe(e,l,s){var c,n,a;e&&2<e.length&&null!==(c=Oe(e=JSON.parse(e)))&&null!==l&&(n=l,a=s,new Promise((t,e)=>{De(Ce(n+"_"+a)).then(e=>{t(e)})}).then(e=>{var t,n,a,o=Te(),r=c,i=(o===g&&(t=(a=new Date).getUTCFullYear(),n=("0"+(a.getUTCMonth()+1)).slice(-2),a=("0"+a.getUTCDate()).slice(-2),r.date=t+"-"+n+"-"+a),(e=>{try{var t=Q.encode(JSON.stringify(e)),n=t.length,a=0;if(n<16)return t;for(var o=0;o<n;o++)a+=t.charCodeAt(o);return Ce(Q.encode(t.substring(0,8)+"-"+t.substring(n/2-4,n/2+4)+"-"+t.substring(n-8,n)+"-"+a))}catch(e){I.error(e)}})(c));c.hash=i,c.brandId=l,c.documentId=e,c.channel=Je(),(c.pageType=o)===g&&(c.relationId=s,c.hasOwnProperty("title")&&c.title||(c.title=document.title)),Z=setTimeout(function(){var t,n;!u&&(t=function(){U&&Ie().then(()=>{ingestion.signal("dataLayer",c)}),clearTimeout(Z)},n=ke("get","https://api.smartocto.com/api/brands/"+l+"/dataLayer/"+e+"_"+i))&&(n.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(e=JSON.parse(n.responseText))&&!1===e.match&&t()},n.send())},5e3)}))}function Ae(e){if(e&&0<e.length){for(var a=[],r=localStorage.getItem("tentacles_"+y+"_brand"),t=0;t<e.length;t++){var n=e[t],o=n.linkPath.trim().toLowerCase(),i=o.startsWith("/");0!==o.indexOf("http://")&&0!==o.indexOf("https://")?n.linkPath=location.origin+(i?o[-1]:o):n.linkPath=o,a.push({brandId:r,relationId:n.relationId,linkPosition:n.linkPosition,linkSourcePath:n.linkSourcePath,linkXPath:n.linkXPath,uri:o})}K=setTimeout(function(){var e,t,n;!u&&(e=r,t=function(){var e=a.map(o=>new Promise((n,a)=>{if(U){delete o.brandId;let e=Object.keys(o).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(o[e])).join("&"),t=ke("get",`https://api.smartocto.com/api/brands/${r}/tentacles/teaser_add?`+e);t?(t.onload=()=>{200<=t.status&&t.status<300?n(t.response):a(new Error("Request failed with status "+t.status))},t.onerror=()=>a(new Error("Network error")),t.send()):a(new Error("CORS request creation failed"))}else n()}));Promise.all(e).then(()=>{I.log("Checking page mapping READY AND SEND!")}).catch(e=>{I.error("Error sending page mapping task:",e),clearTimeout(K)})},I.log("Checking page mapping",window.location.pathname),n=ke("get","https://api.smartocto.com/api/brands/"+e+"/tentacles/teaser_check?path="+window.location.pathname))&&(n.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(e=JSON.parse(n.responseText))&&e.mapping_require_update&&t()},n.send())},3e3)}else I.error("Page mapping is not available")}function Ne(){return new Promise(function(a){function p(e){return e.replace(/[^\w\s]/gi,"")}function h(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])<0)return;return 1}var n=[],o=[],l=(L=null!==(L=localStorage.getItem("tentacles_"+y+"_useDivInReplacement"))&&"true"===L,localStorage.getItem("tentacles_"+y+"_basePaths")),r=JSON.parse(localStorage.getItem("tentacles_"+y+"_urls"));function s(t,n,a){let o=0;for(let e=0;e<n.length;e++){var r,i,l,s=a[e]||"",_=[],c=(e=>{for(var t,n=/\b\w+\b/g,a=[];(t=n.exec(e))&&a.push(p(t[0])););return a})(n[e]);if("a"===t.tagName.toLowerCase()&&1===t.childNodes.length&&"#text"===t.childNodes[0].nodeName&&h(c,p(t.innerText))&&t.innerText.length<=n[e].length+4)_.push([t.children.length,t]);else{L&&(m=void 0,(null===(m=localStorage.getItem("tentacles_"+y+"_replacementElements"))||"undefined"===m?[]:JSON.parse(m)).map(function(e){-1===Y.indexOf(e)&&Y.push(e)}));for(var d=0;d<Y.length;d++)for(r=Y[d],i=t.querySelectorAll(r),l=0;l<i.length;l++)i[l]&&h(c,p(i[l].innerText))&&i[l].innerText.length<=n[e].length+4&&(g=i[l],u=void 0,g instanceof Element)&&"none"!==(u=getComputedStyle(g)).display&&"visible"===u.visibility&&!(u.opacity<.1)&&g.offsetWidth+g.offsetHeight+g.getBoundingClientRect().height+g.getBoundingClientRect().width!==0&&_.push([i[l].children.length,i[l]])}_.length&&(_.sort(function(e,t){return t[0]-e[0]}),m=_.pop(),(element=m[1]).innerText=s,o++)}var g,u,m;return o===n.length}function c(n,a){return new Promise((t,e)=>{!n.includes("b-cdn.net")&&!n.includes("smartocto.com")||0<=o.indexOf(n)?t({isReachable:!0,titleLocation:a}):fetch(n,{method:"HEAD"}).then(e=>{o.push(n),200===e.status?t({isReachable:!0,titleLocation:a}):(I.error(`Failed to fetch the URL: ${n}. Status code: `+e.status),t({isReachable:!1,titleLocation:a}))}).catch(e=>{I.error(`An error occurred while trying to fetch the URL: ${n} `+e),t({isReachable:!1,titleLocation:a})})})}function d(n,a,o){var r=new Array(a.length).fill(!1);if(0<o.length)for(let t=0;t<a.length;t++)for(let e=0;e<H.length;e++){var i=H[e],l=n.querySelectorAll(i);for(let e=0;e<l.length;e++){var s=l[e];s&&(s.src.includes(a[t])||s.srcset.includes(a[t]))&&("src"in s&&""!==s.src&&(s.src=s.src.split(a[t]).join(o[t])),"srcset"in s&&""!==s.srcset&&(s.srcset=s.srcset.split(a[t]).join(o[t])),r[t]=!0)}}return r.every(e=>e)}if(r&&0<r.length){let e=r.map(function(i){return new Promise(function(t){var r,e;0<=n.indexOf(i.relationId)?t():(n.push(i.relationId),r=i.relationId,i.hasOwnProperty("type")&&"video"===i.type&&(r=i.relationId.substring(1)),e=(l&&0<l.length?Array.from(document.querySelectorAll('a[tentacle-id^="'+r+'"]')):Array.from(document.querySelectorAll('a[href*="'+r+'"]'))).map(function(o){return new Promise(function(n){var e,t,a;"1"===o.getAttribute("data-tentacles-r")||(t=E,a=Array.from(o.classList),t&&Array.isArray(t)&&0<t.length&&a&&Array.isArray(a)&&0<a.length&&0<t.filter(function(e){return-1<a.indexOf(e)}).length)?n():(e=t=!1,i.hasOwnProperty("oldTitle")&&i.hasOwnProperty("newTitle")&&(t=!0),i.hasOwnProperty("oldPictures")&&i.hasOwnProperty("newPictures")&&0<o.querySelectorAll("img").length&&(e=!0),t&&e?c(i.newPictures[0],o).then(function(e){var t;e.isReachable?(e=s(o,i.oldTitle.split("$$"),i.newTitle.split("$$")),t=d(o,i.oldPictures,i.newPictures),e&&t?(o.setAttribute("data-tentacles-r","1"),n(r)):s(o,i.newTitle.split("$$"),i.oldTitle.split("$$"))||d(o,i.newPictures,i.oldPictures)||(o.removeAttribute("data-tentacles-r"),I.error("TENTACLES: Title and picture restore failed and could be caused by a missing match in the title.","oldTitle",JSON.stringify(i.oldTitle.split("$$")),"newTitle",JSON.stringify(i.newTitle.split("$$"),"oldPictures",JSON.stringify(i.oldPictures),"newPictures",JSON.stringify(i.newPictures))))):I.error("TENTACLES: The new picture is not reachable",i.newPictures[0]),n()}).catch(function(e){I.error("TENTACLES: An error occurred during picture and title replacement: "+e),n()}):t&&!e?new Promise((e,t)=>{e(!0)}).then(function(e){s(o,i.oldTitle.split("$$"),i.newTitle.split("$$"))&&(o.setAttribute("data-tentacles-r","1"),n(r)),n()}).catch(function(e){I.error("TENTACLES: An error occurred during title replacement: "+e),n()}):e&&!t?c(i.newPictures[0],o).then(function(e){var t=e.titleLocation;e.isReachable?d(t,i.oldPictures,i.newPictures)?(t.setAttribute("data-tentacles-r","1"),n(r)):d(t,i.newPictures,i.oldPictures)||(t.removeAttribute("data-tentacles-r"),I.warn("TENTACLES: Restoring original picture failed and could be caused by a missing match in original picture paths.","oldPictures",JSON.stringify(i.oldPictures),"newPictures",JSON.stringify(i.newPictures))):I.error("TENTACLES: The new picture is not reachable",i.newPictures[0]),n()}).catch(function(e){I.error("TENTACLES: An error occurred during picture replacement: "+e),n()}):n())})}),Promise.all(e).then(function(e){t(e)}))})});Promise.all(e).then(function(e){e=e.map(function(e){return e?e.filter(function(e){return null!=e}):[]}).filter(function(e){return 0<e.length}).map(function(e){return e[0]});for(var t=0;t<e.length;t++)ce.push(e[t]);var n=r.filter(function(e){var t=e.hasOwnProperty("type")&&"video"===e.type?e.relationId.substring(1):e.relationId;return"active"===e.status&&-1<ce.indexOf(t)}).map(function(e){return{headerTestId:e.id,headerTestChosenId:e.chosen}});z=setTimeout(function e(n){if(U&&void 0!==window.ingestion){let e=localStorage.getItem("tentacles_"+y+"_brand"),t;0<n.length&&!u&&(t={brandId:e,impressions:JSON.stringify(n)},U)&&ingestion.signal("impressions",t)}else z=setTimeout(e,250,n)},1e3,n),window.tentaclesProcessedABTitles=!0,a()})}else a()})}function Ee(a){return new Promise((e,t)=>{let n=document.createElement("script");n.onerror=t,a.url||t(new Error("oops no scriptURL defined to load")),n.type="text/javascript",n.onload=e,a.hasOwnProperty("defer")&&"boolean"==typeof a.defer&&(n.defer=a.defer),a.hasOwnProperty("async")&&"boolean"==typeof a.async&&(n.async=a.async),n.src=a.url;t=document.body;t?"body-top"===a.location?t.insertBefore(n,t.firstChild):t.appendChild(n):addEventListener("DOMContentLoaded",()=>{document.body.appendChild(n)})})}function Le(e){return t=window.navigator.userAgent,(0<(n=t.indexOf("MSIE "))?parseInt(t.substring(n+5,t.indexOf(".",n)),10):0<t.indexOf("Trident/")?(n=t.indexOf("rv:"),parseInt(t.substring(n+3,t.indexOf(".",n)),10)):0<(n=t.indexOf("Edge/"))&&parseInt(t.substring(n+5,t.indexOf(".",n)),10))?"object"==typeof window.wgxpath?window.document.createExpression(e).evaluate(window.document,XPathResult.STRING_TYPE):void Ee({url:WGXPATH_URL,defer:!0,async:!1}).then(()=>(wgxpath.install(),window.document.createExpression(e).evaluate(window.document,XPathResult.STRING_TYPE))).catch(e=>{I.error("wgxpath script loading error:",e)}):(new XPathEvaluator).createExpression(e).evaluate(document,XPathResult.FIRST_ORDERED_NODE_TYPE).singleNodeValue;var t,n}function De(e){try{var t=(new TextEncoder).encode(e);return(window.crypto||window.msCrypto).subtle.digest("SHA-256",t).then(function(e){for(var t="",n=new DataView(e),a=0;a<n.byteLength;a+=4)t+=("00000000"+n.getUint32(a).toString(16)).slice(-8);return t})}catch(e){d(e)}}function Re(){return new Promise(function(t,e){try{clearInterval(tentacle_timer_apply);var n,a=localStorage.getItem("tentacles_"+y+"_urls_time"),o=localStorage.getItem("tentacles_"+y+"_dockcache_time"),r=new Date;null!==a&&r<new Date(a)&&(x=JSON.parse(localStorage.getItem("tentacles_"+y+"_urls")),le=!1),u&&null!==o&&r<new Date(o)&&(se=!1),le||u&&se?(n=ke("get","https://api.smartocto.com/api/brands/tentacles?i="+y+(u?"&dock=true":"")))&&(n.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(e=JSON.parse(n.responseText),x=e.headerTests,de=e.domainSettings.regex,A="true"===String(e.domainSettings.regex_on_params).toLocaleLowerCase(),N=e.domainSettings.vPath,p=e.domainSettings.searchPath,h=e.domainSettings.mapping,T=window&&window.tentacles&&window.tentacles.brandId?window.tentacles.brandId:e.domainSettings.brand,ge=e.domainSettings.mainContent,m=e.domainSettings.excludeContent,R=e.domainSettings.xPathIds,E=e.domainSettings.excludeClasses,L=e.domainSettings.useDivInReplacement,D=e.domainSettings.replacementElements,J=e.domainSettings.dataLayerConfig,M=e.domainSettings.collectReadingtime,w=e.domainSettings.basePaths,O=e.domainSettings.ignorePaths,S=e.domainSettings.customCss,B=e.domainSettings.doNotTrackUserId,b=e.domainSettings.urls,U="true"===String(e.domainSettings.useIngestionApi).toLocaleLowerCase(),q="true"===String(e.domainSettings.imageTesting).toLocaleLowerCase(),k=e.domainSettings.features,j=e.domainSettings.idp,C=e.domainSettings.sendPageMapping,e.domainSettings.hasOwnProperty("ai")&&null!==e.domainSettings.ai&&(F=e.domainSettings.ai.clientId,ue=e.domainSettings.ai.publicationTimeFrom,me=e.domainSettings.ai.publicationTimeTo,pe=e.domainSettings.ai.northstars,he=e.domainSettings.ai.goals),(null===localStorage.getItem("tentacles_"+y+"_urls")?()=>{for(var e=!(P=[]),t=0,n=x.length;t<n;t++)if(0!==x[t].testData.length){var a,e=!1,o={};if(x[t].status===ae)o.chosen=x[t].chosen,e=!0;else if(x[t].status===oe)for(var r=0,i=x[t].testData.length;r<i;r++)if(x[t].testData[r].won){e=!0,o.chosen=x[t].testData[r].id;break}o.id=x[t].id,o.relationId=x[t].relationId,o.status=x[t].status,o.oldTitle=x[t].testData[0].title,x[t].hasOwnProperty("pictures")&&(o.oldPictures=x[t].testData[0].pictures),o.type=x[t].hasOwnProperty("type")?x[t].type:"story",!1===e?(o.newTitle=o.oldTitle,o.hasOwnProperty("oldPictures")&&(o.newPictures=o.oldPictures)):(a=fe(x[t].testData,"id",o.chosen),o.newTitle=a.title,a.hasOwnProperty("pictures")&&(o.newPictures=a.pictures)),0===o.chosen&&e||P.push(o)}p?localStorage.setItem("tentacles_"+y+"_domainsearchpath",p):localStorage.removeItem("tentacles_"+y+"_domainsearchpath"),localStorage.setItem("tentacles_"+y+"_urls",JSON.stringify(P)),localStorage.setItem("tentacles_"+y+"_domainregex",de),localStorage.setItem("tentacles_"+y+"_brand",T),localStorage.setItem("tentacles_"+y+"_main_content",ge),m?localStorage.setItem("tentacles_"+y+"_exclude_content",m):localStorage.removeItem("tentacles_"+y+"_exclude_content"),A?localStorage.setItem("tentacles_"+y+"_domainregex_on_params",A):localStorage.removeItem("tentacles_"+y+"_domainregex_on_params"),E?localStorage.setItem("tentacles_"+y+"_excludeclasses",JSON.stringify(E)):localStorage.removeItem("tentacles_"+y+"_excludeclasses"),D?localStorage.setItem("tentacles_"+y+"_replacementElements",JSON.stringify(D)):localStorage.removeItem("tentacles_"+y+"_replacementElements"),N?localStorage.setItem("tentacles_"+y+"_domainvpath",N):localStorage.removeItem("tentacles_"+y+"_domainvpath"),h?localStorage.setItem("tentacles_"+y+"_pagemapping",JSON.stringify(h)):localStorage.removeItem("tentacles_"+y+"_pagemapping"),R?localStorage.setItem("tentacles_"+y+"_xPathIds",R):localStorage.removeItem("tentacles_"+y+"_xPathIds"),L?localStorage.setItem("tentacles_"+y+"_useDivInReplacement",JSON.stringify(L)):localStorage.removeItem("tentacles_"+y+"_useDivInReplacement"),J?localStorage.setItem("tentacles_"+y+"_data_layer_config",JSON.stringify(J)):localStorage.removeItem("tentacles_"+y+"_data_layer_config"),M?localStorage.setItem("tentacles_"+y+"_reading_time",JSON.stringify(M)):localStorage.removeItem("tentacles_"+y+"_reading_time"),w?localStorage.setItem("tentacles_"+y+"_basePaths",JSON.stringify(w)):localStorage.removeItem("tentacles_"+y+"_basePaths"),O?localStorage.setItem("tentacles_"+y+"_ignorePaths",JSON.stringify(O)):localStorage.removeItem("tentacles_"+y+"_ignorePaths"),B?localStorage.setItem("tentacles_"+y+"_doNotTrackUserId",B):localStorage.removeItem("tentacles_"+y+"_doNotTrackUserId"),U?localStorage.setItem("tentacles_"+y+"_useIngestionApi",U):localStorage.removeItem("tentacles_"+y+"_useIngestionApi"),b&&localStorage.setItem("tentacles_"+y+"_page_urls",JSON.stringify(b)),S&&localStorage.setItem("tentacles_"+y+"_customCss",S),q&&localStorage.setItem("tentacles_"+y+"_imageTesting",q),k&&localStorage.setItem("tentacles_"+y+"_features",JSON.stringify(k)),j&&localStorage.setItem("tentacles_"+y+"_idp",j),C?localStorage.setItem("tentacles_"+y+"_sendPageMapping",C):localStorage.removeItem("tentacles_"+y+"_sendPageMapping"),F&&localStorage.setItem("tentacles_"+y+"_ai_client_id",F),ue&&localStorage.setItem("tentacles_"+y+"_ai_publication_time_from",ue),me&&localStorage.setItem("tentacles_"+y+"_ai_publication_time_to",me),pe&&localStorage.setItem("tentacles_"+y+"_ai_northstars",pe),he&&localStorage.setItem("tentacles_"+y+"_ai_goals",he)}:()=>{var e=JSON.parse(localStorage.getItem("tentacles_"+y+"_urls")),t=!1;if(0===x.length)localStorage.removeItem("tentacles_"+y+"_urls");else{for(var n,a=x.map(function(e){return e.id}),o=0;o<x.length;o++)if(0!==x[o].testData.length){for(var t=!1,r=0;r<e.length;r++)if(e[r].id===x[o].id){for(var i=0,l=x[o].testData.length;i<l;i++)if(x[o].testData[i].won){e[r].chosen=x[o].testData[i].id;break}e[r].status=x[o].status,(s=fe(x[o].testData,"id",x[o].chosen))&&(e[r].type=x[o].type,e[r].chosen=x[o].chosen,s.hasOwnProperty("title")&&(e[r].newTitle=s.title),s.hasOwnProperty("pictures"))&&(e[r].newPictures=s.pictures),t=!0;break}if(!1===t){var s,c={};if(x[o].status===ae)c.chosen=x[o].chosen,t=!0;else if(x[o].status===oe)for(var r=0,d=x[o].testData.length;r<d;r++)if(x[o].testData[r].won){t=!0,c.chosen=x[o].testData[r].id;break}c.id=x[o].id,c.relationId=x[o].relationId,c.status=x[o].status,c.oldTitle=x[o].testData[0].title,x[o].hasOwnProperty("pictures")&&(c.oldPictures=x[o].testData[0].pictures),c.type=x[o].hasOwnProperty("type")?x[o].type:"story",!1===t?(c.newTitle=c.oldTitle,c.newPictures=c.oldPictures):(s=fe(x[o].testData,"id",c.chosen),c.newTitle=s.title,s.hasOwnProperty("pictures")&&(c.newPictures=s.pictures)),0===c.chosen&&t||e.push(c)}}0<x.length&&(n=e.filter(function(e){if(-1!==a.indexOf(e.id))return!0})),localStorage.setItem("tentacles_"+y+"_urls",JSON.stringify(n)),P=n}p?localStorage.setItem("tentacles_"+y+"_domainsearchpath",p):localStorage.removeItem("tentacles_"+y+"_domainsearchpath"),localStorage.setItem("tentacles_"+y+"_domainregex",de),localStorage.setItem("tentacles_"+y+"_brand",T),ge?localStorage.setItem("tentacles_"+y+"_main_content",ge):localStorage.removeItem("tentacles_"+y+"_main_content"),m?localStorage.setItem("tentacles_"+y+"_exclude_content",m):localStorage.removeItem("tentacles_"+y+"_exclude_content"),A?localStorage.setItem("tentacles_"+y+"_domainregex_on_params",JSON.stringify(A)):localStorage.removeItem("tentacles_"+y+"_domainregex_on_params"),E?localStorage.setItem("tentacles_"+y+"_excludeclasses",JSON.stringify(E)):localStorage.removeItem("tentacles_"+y+"_excludeclasses"),D?localStorage.setItem("tentacles_"+y+"_replacementElements",JSON.stringify(D)):localStorage.removeItem("tentacles_"+y+"_replacementElements"),N?localStorage.setItem("tentacles_"+y+"_domainvpath",N):localStorage.removeItem("tentacles_"+y+"_domainvpath"),h?localStorage.setItem("tentacles_"+y+"_pagemapping",JSON.stringify(h)):localStorage.removeItem("tentacles_"+y+"_pagemapping"),R?localStorage.setItem("tentacles_"+y+"_xPathIds",R):localStorage.removeItem("tentacles_"+y+"_xPathIds"),L?localStorage.setItem("tentacles_"+y+"_useDivInReplacement",JSON.stringify(L)):localStorage.removeItem("tentacles_"+y+"_useDivInReplacement"),J?localStorage.setItem("tentacles_"+y+"_data_layer_config",JSON.stringify(J)):localStorage.removeItem("tentacles_"+y+"_data_layer_config"),M?localStorage.setItem("tentacles_"+y+"_reading_time",JSON.stringify(M)):localStorage.removeItem("tentacles_"+y+"_reading_time"),w?localStorage.setItem("tentacles_"+y+"_basePaths",JSON.stringify(w)):localStorage.removeItem("tentacles_"+y+"_basePaths"),O?localStorage.setItem("tentacles_"+y+"_ignorePaths",JSON.stringify(O)):localStorage.removeItem("tentacles_"+y+"_ignorePaths"),S?localStorage.setItem("tentacles_"+y+"_customCss",S):localStorage.removeItem("tentacles_"+y+"_customCss"),b?localStorage.setItem("tentacles_"+y+"_page_urls",JSON.stringify(b)):localStorage.removeItem("tentacles_"+y+"_page_urls"),B?localStorage.setItem("tentacles_"+y+"_doNotTrackUserId",B):localStorage.removeItem("tentacles_"+y+"_doNotTrackUserId"),U?localStorage.setItem("tentacles_"+y+"_useIngestionApi",U):localStorage.removeItem("tentacles_"+y+"_useIngestionApi"),q?localStorage.setItem("tentacles_"+y+"_imageTesting",q):localStorage.removeItem("tentacles_"+y+"_imageTesting"),k?localStorage.setItem("tentacles_"+y+"_features",JSON.stringify(k)):localStorage.removeItem("tentacles_"+y+"_features"),j&&localStorage.setItem("tentacles_"+y+"_idp",j),C?localStorage.setItem("tentacles_"+y+"_sendPageMapping",C):localStorage.removeItem("tentacles_"+y+"_sendPageMapping"),F&&localStorage.setItem("tentacles_"+y+"_ai_client_id",F),ue&&localStorage.setItem("tentacles_"+y+"_ai_publication_time_from",ue),me&&localStorage.setItem("tentacles_"+y+"_ai_publication_time_to",me),pe&&localStorage.setItem("tentacles_"+y+"_ai_northstars",pe),he&&localStorage.setItem("tentacles_"+y+"_ai_goals",he)})(),localStorage.setItem("tentacles_"+y+"_urls_time",""+new Date((new Date).getTime()+ne)),u&&localStorage.setItem("tentacles_"+y+"_dockcache_time",""+new Date((new Date).getTime()+ne)),t())},n.send()):t()}catch(t){d(t),e(t)}})}function Je(){return window&&window.tentacles&&window.tentacles.channel?window.tentacles.channel:"web"}function Me(){function l(e,t){try{u||("function"==typeof trackReadingTime?trackReadingTime(e,t):Ee({url:window.tentacles.installUri?window.tentacles.installUri+"/reading-time.js":"https://tentacles.smartocto.com/ten/reading-time.js?v=1741167381534",defer:!0,async:!0}).then(function(){trackReadingTime(e,t)}).catch(function(e){I.error("Loading error trackReadingTime:",e)}))}catch(e){I.error(e)}}clearInterval(tentacle_timer_apply);function s(e){if(!(5e3<Date.now()-c)){var t=localStorage.getItem("tentacles_"+y+"_brand"),n=localStorage.getItem("tentacles_"+y+"_main_content"),a=localStorage.getItem("tentacles_"+y+"_exclude_content"),o="true"===String(localStorage.getItem("tentacles_"+y+"_reading_time"))||"false"!==String(localStorage.getItem("tentacles_"+y+"_reading_time"))&&void 0;if(window.ingestion&&t&&e){if(e&&o){var r={brandId:t,relationId:e,mainContent:n,excludeContent:a};try{var i=U&&void 0!==window.ingestion?window.ingestion:void 0;i?l(r,i):Ie().then(function(){l(r,i)})}catch(e){I.error(e)}}}else G=setTimeout(function(){s(e)},500)}}var c=Date.now();function n(){var c,d,p={},h=[],g=localStorage.getItem("tentacles_"+y+"_pagemapping"),f=localStorage.getItem("tentacles_"+y+"_domainsearchpath"),w="true"===localStorage.getItem("tentacles_"+y+"_xPathIds"),u=localStorage.getItem("tentacles_"+y+"_domainregex"),m=localStorage.getItem("tentacles_"+y+"_basePaths");function S(e,t,n){var a,o=e.attributes.href.nodeValue,r=e.getAttribute("tentacle-id"),_=r?r.split("-")[0]:void 0,i=((e,t)=>{if(P)for(var n=0;n<P.length;n++){var a=P[n].relationId;if(P[n].hasOwnProperty("type")&&"video"===P[n].type&&(a=P[n].relationId.substring(1)),(0<=e.indexOf(a)||t===P[n].relationId)&&0<=ce.indexOf(a))return{relationId:P[n].relationId,id:P[n].id,chosenId:P[n].chosen,status:P[n].status,type:P[n].type}}})(o,_),i=i&&i.status===ae?(c=i.id,i.chosenId):c=-1,l={brandId:T,linkPath:o,linkXPath:function e(t,n){if(""!==t.id&&n)return"id('"+t.id+"')";if(t===document.body)return t.tagName.toLowerCase();for(var a=0,o=t.parentNode?t.parentNode.childNodes:[],r=0;r<o.length;r++){var i=o[r];if(i===t)return e(t.parentNode,n)+"/"+t.tagName.toLowerCase()+"["+(a+1)+"]";1===i.nodeType&&i.tagName===t.tagName&&a++}}(e,w),linkSourcePath:location.pathname,headerTestId:c,headerTestChosenId:i,relationId:_},o={top:0,left:0};if(f&&"undefined"!==f){var s,c=f.split("|");if(2===c.length)try{"class"===c[0]?1<=(s=document.getElementsByClassName(c[1])).length&&(o=s[0].getBoundingClientRect()):o=document.getElementById(c[1]).getBoundingClientRect()}catch(e){I.error(e)}}else o=document.body.getBoundingClientRect();try{var d=e.getBoundingClientRect(),g=d.top-o.top,u=d.left-o.left,m=(n&&(u=d.left-n.left),{linkX1:Math.round10(u,1),linkX2:Math.round10(u+d.width,1),linkY1:Math.round10(g,1),linkY2:Math.round10(g+d.height,1),linkHeight:Math.round10(d.height,1),linkWidth:Math.round10(d.width,1)});m.linkPosition=void 0===t?location.pathname+"_"+m.linkX1+"_"+m.linkY1+"_"+m.linkX2+"_"+m.linkY2:location.pathname+"_"+m.linkX1+"_"+m.linkY1+"_"+m.linkX2+"_"+m.linkY2+"_"+t}catch(e){I.error(e)}for(a in m)l[a]=m[a];i=ee.compressToUTF16(JSON.stringify(l));p[r]=we(i),h.push(l),window.tentacles_pageData=p,be("linkclick")||e.addEventListener("click",function(e){var t=window.tentacles_pageData;v("getPagedata",t),v("tentacleId",r),v("getPagedata[tentacleId]",t[r]),localStorage.setItem("tentacles_linkClick",t[r])})}T=localStorage.getItem("tentacles_"+y+"_brand"),Se().then(function(e){if(e)V(),I.log("Tentacles is initiating Article Page"),be("linkclick")?window.tentacles.initiated=!0:X(window.location.href).then(function(e){ye(e).then(function(){window.tentacles.initiated=!0})});else{I.log("Tentacles is initiating Index Page"),u||m||I.error("Domain's regex and optional basePaths are missing");var n=u&&RegExp(u);if(g){if(d=JSON.parse(g))for(var a in c=d["*"],c=d[window.location.pathname]?d[window.location.pathname]:c)if(c.hasOwnProperty(a)){var o=Le(c[a]);if(o)for(var _=(_=Array.from(o.getElementsByTagName("a"))).filter(function(e){return n?e.href&&n.test(e.href):e.href}),r=o.getBoundingClientRect(),i=0;i<_.length;i++)S(_[i],a,r)}}else for(var l=(l=Array.from(document.body.getElementsByTagName("a"))).filter(e=>n?e.href&&n.test(e.href):e.href),s=0;s<l.length;s++)S(l[s]);let e=localStorage.getItem("tentacles_"+y+"_page_urls"),t=!1;e&&(e=JSON.parse(e)).includes(window.location.origin+window.location.pathname)&&(t=!0),"true"===localStorage.getItem("tentacles_"+y+"_sendPageMapping")&&t&&Ae(h),window.tentacles.initiated=!0}})}be("pageview")||window.tentacles.hasOwnProperty("trackauto")&&!window.tentacles.trackauto||ve(),Re().then(function(){v("populateCaching ended"),U=U||"true"===localStorage.getItem("tentacles_"+y+"_useIngestionApi"),u||(U||I.error("Tentacles: No data can be collected for smartocto's Tentacles, please check configuration values"),Se().then(function(e){e?X(window.location.href).then(function(e){var t;e&&(window.tentaclesProcessedABTitles=!0,document.body?n():window.addEventListener("DOMContentLoaded",function(){n()}),J=localStorage.getItem("tentacles_"+y+"_data_layer_config"),(t=localStorage.getItem("tentacles_"+y+"_brand"))&&J&&(v("call sendDataLayer"),xe(J,t,e)),s(e))}):(new Promise(function(o,e){var r=document.body.getElementsByTagName("a"),i=0;if(r&&r.length){for(var t=[],l=[],n=0;n<r.length;n++)t.push((n=>new Promise(function(t,e){X(n).then(function(e){t({relationId:e,path:n})})}))(r[n].getAttribute("href")));Promise.all(t).then(function(e){l=e}).catch(function(e){I.error(e)}).finally(function(){for(var e=0;e<r.length;e++){var t=r[e].getAttribute("href"),n=r[e],a=l.filter(function(e){return e.path===t});0<a.length&&a[0].relationId&&n.setAttribute("tentacle-id",a[0].relationId+"-"+i.toString(16)),i++}o(!0)})}else o(!1)}).then(function(e){e&&Ne().then(function(e){document.body?n():window.addEventListener("DOMContentLoaded",function(){n()})})}),(k=localStorage.getItem("tentacles_"+y+"_features")?JSON.parse(localStorage.getItem("tentacles_"+y+"_features")):[]).includes("landingPages")&&Te()===g&&Pe().then(function(e){J=localStorage.getItem("tentacles_"+y+"_data_layer_config");var t=localStorage.getItem("tentacles_"+y+"_brand");t&&J&&(v("call sendDataLayer"),xe(J,t,e)),s(e)}))})),I.log("smartocto's Tentacles "+window.tentacles.version+" loaded..."),t&&I.log("Tentacles flicker handling is active")}).catch(function(e){d("error in populateCaching",e)})}v("Initializing Tentacles"),window.tentacles?(window.tentacles.ready=function(){return window.tentacles.initiated},window.tentacles.readyPromise=function(){return new Promise((e,t)=>{window.tentacles.ready()?e(!0):(tentacle_timer_ready=setTimeout(window.tentacles.readyPromise,100,e),e(!1))})},window.tentacles.onVideoPlay=function(t){if(t&&t.videoId&&t.title)try{t.brandId=localStorage.getItem("tentacles_"+y+"_brand"),t.channel=Je(),t.relationId&&0<t.relationId.length?window.ingestion.signal("videoPlay",t):X(window.location.href).then(function(e){t.relationId=e}).finally(function(){window.ingestion.signal("videoPlay",t)})}catch(t){d("Error on video play event",t)}else I.error("Invalid video play request.",JSON.stringify(t))},window.tentacles.sendLinkClick=function(t){return new Promise((n,a)=>{let o=t.tentacleId,e=t.relationId,r="";if(o){let t=window.tentacles_pageData[o];if(t)if(e)ye(e,t,"linkClick").then(()=>{n(!0)});else{let e=document.querySelector('a[tentacle-id="'+o+'"]');e.hasAttribute("href")?X(e.href).then(e=>{ye(e,t,"linkClick").then(()=>{n(!0)})}):a(r=`Invalid link click request, we need a valid relationId or a valid link href for tentacleId ${o}.`)}else a(r=`Could not find link data for tentacleId ${o}. First start data collection with window.postMessage('activateTentacles') and check if the global variable window.tentacles.ready() or window.tentacles.readyPromise() is positive to make sure all required data is collected.`)}else a(r="Invalid request, we expect an object with the following structure: { tentacleId: string, relationId: string }, where relationId is optional.")}).catch(e=>{reject("Error on linkClick event",e)})},window.tentacles.sendPageView=function(e){return new Promise((t,n)=>{ve(e).then(e=>{e?t(!0):n("Page view event failed")}).catch(e=>{n(e)})}).catch(e=>(I.error("Error on page view event",e),!1))}):I.error("Tentacles is not loaded, please check if the script is loaded correctly."),window.tentaclesExecuted?v("%cTentacles: Skipping execution!","background: #EE191E; color: white; padding: 2px 4px; border-radius: 4px 0px 0px 4px;"):(O=localStorage.getItem("tentacles_"+y+"_ignorePaths"),re=JSON.parse(localStorage.getItem("tentacles_"+y+"_urls")),(e=document.createElement("style")).innerHTML=".tentacles-flicker-handling img, .tentacles-flicker-handling source { display: none; }",document.head.appendChild(e),re&&0<re.length&&re.filter(e=>-1!==[ae,oe].indexOf(e.status)&&e.hasOwnProperty("pictures")&&0<e.pictures.length)&&(t&&document.body.classList.add("tentacles-flicker-handling"),setTimeout(()=>{V()},1e3)),e=!1,(e=!!(O&&0<=JSON.parse(O).indexOf(window.location.pathname))||e)?v("%cTentacles: Skipping execution on "+window.location.pathname+"!","background: #EE191E; color: white; padding: 2px 4px; border-radius: 4px 0px 0px 4px;"):u?(V(),(()=>{try{return window.self!==window.top}catch(e){return 1}})()||(tentacle_timer_apply=setInterval(function(){y&&!ie&&Re().then(function(){Ee({location:"body-top",url:l}).then(function(){ie=!0}).catch(function(e){I.error("Error loading admin script:",e)})}).catch(function(e){d(e)})},100))):tentacle_timer_apply=setInterval(function(){y&&!ie&&(Me(),ie=!0)},100)),window.addEventListener("message",function(e){"activateTentacles"!==e.data&&"stopTentacles"!==e.data||(clearTimeout(c),clearTimeout(s),clearTimeout(W),clearTimeout(G),clearTimeout(z),clearTimeout(Z),clearTimeout(K),localStorage.getItem("tentacles_"+y+"_reading_time")&&(clearInterval(window.tentacles_at_timer_sample),clearInterval(window.tentacles_at_timer_send_beat)),"activateTentacles"!==e.data)||u||Me()},!1),window.tentaclesExecuted=!0})("undefined"==typeof t&&(t={}));